<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Alves 7 - TikTok Shop</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #fe2c55;
            --primary-cyan: #25f4ee;
            --primary-amber: #f4a225; /* Nova cor para edi√ß√£o */
            --dark-bg: #121212;
            --card-bg: #1e1e1e;
            --sidebar-bg: #181818;
            --text-muted: #8a8b91;
            --border-color: #333;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--dark-bg);
            color: white;
            font-family: 'Inter', sans-serif;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 260px;
            background-color: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .brand {
            font-size: 24px;
            font-weight: 900;
            color: white;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .brand span.highlight { color: var(--primary-cyan); }
        .brand .role-badge { 
            font-size: 12px; background: var(--primary-pink); padding: 2px 8px; 
            border-radius: 12px; font-weight: 700; text-transform: uppercase; 
        }

        .menu-label { font-size: 12px; color: var(--text-muted); font-weight: 700; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
        .menu-item {
            display: flex; align-items: center; gap: 12px;
            padding: 12px 16px;
            text-decoration: none; color: white;
            border-radius: 8px; font-weight: 600;
            transition: all 0.3s ease; margin-bottom: 8px;
        }
        .menu-item.active { background-color: rgba(37, 244, 238, 0.1); color: var(--primary-cyan); }
        .menu-item:hover:not(.active) { background-color: #2a2a2a; }
        .menu-icon { width: 20px; height: 20px; stroke: currentColor; fill: none; stroke-width: 2; }

        .sidebar-footer { padding-top: 20px; border-top: 1px solid var(--border-color); }
        .btn-reset {
            width: 100%; padding: 12px; background: transparent; border: 1px solid var(--border-color);
            color: var(--text-muted); border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.3s;
        }
        .btn-reset:hover { background: #2a1515; color: var(--primary-pink); border-color: var(--primary-pink); }

        /* --- MAIN CONTENT --- */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;
        }
        .header h2 { font-size: 28px; font-weight: 800; }
        .header-actions .btn-view-store {
            display: flex; align-items: center; gap: 8px;
            background: var(--primary-cyan); color: var(--dark-bg);
            text-decoration: none; padding: 10px 20px; border-radius: 30px; font-weight: 700;
            box-shadow: 0 4px 15px rgba(37, 244, 238, 0.3); transition: 0.3s;
        }
        .btn-view-store:hover { box-shadow: 0 6px 20px rgba(37, 244, 238, 0.5); transform: translateY(-2px); }

        /* --- STATS CARDS --- */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--card-bg); padding: 20px; border-radius: 16px; border: 1px solid var(--border-color); display: flex; align-items: center; gap: 15px; }
        .stat-icon { width: 50px; height: 50px; background: rgba(37, 244, 238, 0.1); color: var(--primary-cyan); border-radius: 12px; display: flex; align-items: center; justify-content: center; }
        .stat-info h3 { font-size: 32px; font-weight: 900; }
        .stat-info p { color: var(--text-muted); font-size: 14px; }

        /* --- FORMS & LISTS --- */
        .content-grid { display: grid; grid-template-columns: 1.2fr 2fr; gap: 30px; }
        
        .card { background: var(--card-bg); padding: 25px; border-radius: 16px; border: 1px solid var(--border-color); box-shadow: 0 4px 20px rgba(0,0,0,0.2); height: fit-content;}
        .card-header { font-size: 18px; font-weight: 700; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;}

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .form-group { margin-bottom: 15px; }
        .form-group.full-width { grid-column: span 2; }
        label { display: block; margin-bottom: 8px; color: var(--text-muted); font-size: 12px; font-weight: 600; text-transform: uppercase; }
        input {
            width: 100%; padding: 14px; background-color: var(--dark-bg);
            border: 2px solid var(--border-color); border-radius: 10px; color: white;
            font-size: 14px; transition: 0.3s; font-family: 'Inter', sans-serif;
        }
        input:focus { border-color: var(--primary-cyan); outline: none; }
        
        .btn-group { display: flex; gap: 10px; margin-top: 10px; }
        
        .btn-add {
            flex: 1; padding: 14px; background-color: var(--primary-pink);
            border: none; border-radius: 10px; color: white; font-weight: 800;
            cursor: pointer; font-size: 16px; transition: 0.3s;
        }
        .btn-add:hover { background-color: #d92346; box-shadow: 0 4px 15px rgba(254, 44, 85, 0.4); }
        .btn-add.editing { background-color: var(--primary-amber); }
        .btn-add.editing:hover { background-color: #d48b1e; box-shadow: 0 4px 15px rgba(244, 162, 37, 0.4); }

        .btn-cancel {
            padding: 14px 20px; background-color: #333;
            border: none; border-radius: 10px; color: white; font-weight: 700;
            cursor: pointer; font-size: 14px; transition: 0.3s; display: none;
        }
        .btn-cancel:hover { background-color: #444; }

        /* --- PRODUCT LIST STYLES --- */
        .product-list-container { max-height: 600px; overflow-y: auto; padding-right: 5px; }
        .product-list-container::-webkit-scrollbar { width: 5px; }
        .product-list-container::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

        .product-item {
            display: flex; align-items: center; justify-content: space-between;
            background: var(--dark-bg); padding: 12px; border-radius: 12px;
            margin-bottom: 12px; border: 1px solid var(--border-color); transition: 0.2s;
        }
        .product-item:hover { border-color: #555; transform: translateX(5px); }
        .product-info-flex { display: flex; align-items: center; gap: 15px; }
        .product-thumb { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; border: 1px solid #333; }
        .product-details h4 { font-size: 14px; font-weight: 700; margin-bottom: 4px; color: white; }
        .product-details p { font-size: 13px; color: var(--primary-cyan); font-weight: 600; }
        .product-link-preview { font-size: 11px; color: var(--text-muted); }

        .action-buttons { display: flex; gap: 5px; }
        
        .btn-icon {
            width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;
            border: none; border-radius: 8px; cursor: pointer; transition: 0.2s;
        }
        
        .btn-delete-icon { background: rgba(254, 44, 85, 0.1); color: var(--primary-pink); }
        .btn-delete-icon:hover { background: var(--primary-pink); color: white; }

        .btn-edit-icon { background: rgba(244, 162, 37, 0.1); color: var(--primary-amber); }
        .btn-edit-icon:hover { background: var(--primary-amber); color: #121212; }

        .empty-state { text-align: center; padding: 40px 20px; color: var(--text-muted); }
        .empty-state svg { width: 64px; height: 64px; margin-bottom: 15px; opacity: 0.5; }

        /* Responsividade b√°sica para telas menores */
        @media (max-width: 900px) {
            body { flex-direction: column; height: auto; overflow: auto; }
            .sidebar { width: 100%; padding: 20px; flex-direction: row; align-items: center; flex-wrap: wrap; }
            .sidebar-footer { display: none; }
            .content-grid { grid-template-columns: 1fr; }
            .brand { margin-bottom: 0; }
        }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div>
            <div class="brand">
                Alves 7 <span class="role-badge">Admin</span>
            </div>

            <div class="menu-label">Gerenciamento</div>
            <a href="#" class="menu-item active">
                <svg class="menu-icon" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                Produtos
            </a>
        </div>
        
        <div class="sidebar-footer">
            <button class="btn-reset" onclick="resetFactory()">Resetar Loja Padr√£o</button>
        </div>
    </aside>

    <main class="main-content">
        <div class="header">
            <div>
                <h2>Ol√°, Alves! üëã</h2>
                <p style="color: var(--text-muted);">Gerencie o cat√°logo da sua loja aqui.</p>
            </div>
            <div class="header-actions">
                <a href="index.html" class="btn-view-store" target="_blank">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                    Ver Loja
                </a>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
                </div>
                <div class="stat-info">
                    <h3 id="totalProductsCount">0</h3>
                    <p>Produtos Ativos</p>
                </div>
            </div>
        </div>

        <div class="content-grid">
            <div class="card" id="formCard">
                <div class="card-header" id="formHeader">‚ú® Adicionar Novo Produto</div>
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Nome do Produto</label>
                        <input type="text" id="pTitle" placeholder="Ex: iPhone 15 Pro Max Titanium">
                    </div>
                    <div class="form-group">
                        <label>Pre√ßo Atual (Use R$)</label>
                        <input type="text" id="pPrice" placeholder="Ex: R$ 1.200,00">
                    </div>
                    <div class="form-group">
                        <label>Pre√ßo Antigo (Opcional)</label>
                        <input type="text" id="pOldPrice" placeholder="Ex: R$ 2.000,00">
                    </div>
                    <div class="form-group full-width">
                        <label>Caminho da Imagem</label>
                        <input type="text" id="pImg" placeholder="Ex: images/produto-novo.jpg">
                    </div>
                    <div class="form-group full-width">
                        <label>Link da P√°gina (HTML)</label>
                        <input type="text" id="pLink" placeholder="Ex: iphone-15.html">
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn-cancel" id="btnCancel" onclick="cancelEdit()">Cancelar</button>
                    <button class="btn-add" id="btnSave" onclick="handleSave()">+ Publicar Produto</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">üì¶ Invent√°rio Atual</div>
                <div class="product-list-container" id="productList">
                    </div>
                
                <div id="emptyState" class="empty-state" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                    <p>Nenhum produto cadastrado.</p>
                </div>
            </div>
        </div>

    </main>

    <script>
        const STORAGE_KEY = 'tiktokShopProducts';
        
        // Estado da edi√ß√£o
        let editIndex = null; 

        // Lista padr√£o (Backup)
        const defaultList = [
            { id: 1, title: "Smart Tv 32 Philco Led Roku Tv Hd Dolby Audio", price: "R$ 499,00", oldPrice: "R$ 1.279,00", img: "images/t1.webp", link: "tv.html" },
            { id: 2, title: "Fog√£o Atlas 4 Bocas M√¥naco Top Glass Preto", price: "R$ 249,90", oldPrice: "R$ 640,00", img: "images/f1.jpg", link: "fogao.html" },
            { id: 3, title: "Air Fryer 4L Mondial 1500W Bivolt", price: "R$ 79,90", oldPrice: "R$ 205,00", img: "images/q1.webp", link: "air.html" },
            { id: 4, title: "Jogo De Panelas Brinox Ceramic Life Smart Plus 8 Pe√ßas", price: "R$ 89,90", oldPrice: "R$ 230,00", img: "images/p1.webp", link: "kit-panelas.html" },
            { id: 5, title: "√Årvore de Natal Pinheiro Luxo Cl√°ssica 2,10m", price: "R$ 49,90", oldPrice: "R$ 128,00", img: "images/2 (3).webp", link: "arvore.html" },
            { id: 6, title: "Carregador Port√°til (Power Bank) Ultra R√°pido 10000mAh i2GO", price: "R$ 19,90", oldPrice: "R$ 51,00", img: "images/1.webp", link: "cp.html" },
            { id: 7, title: "iPhone 13 PRO Dual SIM 128 GB estelar (Recondicionado)", price: "R$ 999,90", oldPrice: "", img: "images/12 (1).webp", link: "apple.html" },
            { id: 8, title: "iPhone 11 128 GB Branco - Bom (Recondicionado)", price: "R$ 499,90", oldPrice: "R$ 1.099,90", img: "images/r1.webp", link: "apple.html" }
        ];

        // Carregar dados
        let products = JSON.parse(localStorage.getItem(STORAGE_KEY)) || defaultList;

        function renderList() {
            const listDiv = document.getElementById('productList');
            const emptyState = document.getElementById('emptyState');
            const totalCountSpan = document.getElementById('totalProductsCount');
            
            listDiv.innerHTML = '';
            totalCountSpan.innerText = products.length;

            if (products.length === 0) {
                emptyState.style.display = 'block';
                return;
            } else {
                emptyState.style.display = 'none';
            }

            products.forEach((p, index) => {
                const item = document.createElement('div');
                item.className = 'product-item';
                item.innerHTML = `
                    <div class="product-info-flex">
                        <img src="${p.img}" class="product-thumb" onerror="this.src='https://placehold.co/60x60?text=Sem+Img'">
                        <div class="product-details">
                            <h4>${p.title}</h4>
                            <p>${p.price}</p>
                            <span class="product-link-preview">üîó ${p.link}</span>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn-icon btn-edit-icon" onclick="startEdit(${index})" title="Editar Produto">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                        </button>
                        <button class="btn-icon btn-delete-icon" onclick="removeProduct(${index})" title="Excluir Produto">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                        </button>
                    </div>
                `;
                listDiv.appendChild(item);
            });
        }

        // Fun√ß√£o unificada para Salvar (Criar ou Editar)
        function handleSave() {
            const title = document.getElementById('pTitle').value;
            const price = document.getElementById('pPrice').value;
            const oldPrice = document.getElementById('pOldPrice').value;
            const img = document.getElementById('pImg').value;
            const link = document.getElementById('pLink').value;

            if(!title || !price || !img || !link) {
                alert('Por favor, preencha os campos obrigat√≥rios (Nome, Pre√ßo, Imagem e Link).');
                return;
            }

            if (editIndex !== null) {
                // MODO EDI√á√ÉO: Atualiza o existente
                products[editIndex] = {
                    ...products[editIndex], // mant√©m o ID original
                    title, price, oldPrice, img, link
                };
                alert('Produto atualizado com sucesso!');
            } else {
                // MODO CRIA√á√ÉO: Adiciona novo
                const newProd = {
                    id: Date.now(),
                    title, price, oldPrice, img, link
                };
                products.unshift(newProd);
            }

            saveData();
            cancelEdit(); // Reseta o formul√°rio
        }

        function startEdit(index) {
            const p = products[index];
            editIndex = index;

            // Preenche os campos
            document.getElementById('pTitle').value = p.title;
            document.getElementById('pPrice').value = p.price;
            document.getElementById('pOldPrice').value = p.oldPrice || '';
            document.getElementById('pImg').value = p.img;
            document.getElementById('pLink').value = p.link;

            // Muda visual do formul√°rio
            const btnSave = document.getElementById('btnSave');
            btnSave.innerText = 'üíæ Salvar Altera√ß√µes';
            btnSave.classList.add('editing');
            
            document.getElementById('formHeader').innerText = '‚úèÔ∏è Editando Produto';
            document.getElementById('btnCancel').style.display = 'block';

            // Rola at√© o formul√°rio
            document.querySelector('.main-content').scrollTo(0, 0);
        }

        function cancelEdit() {
            editIndex = null;
            
            // Limpar formul√°rio
            document.getElementById('pTitle').value = '';
            document.getElementById('pPrice').value = '';
            document.getElementById('pOldPrice').value = '';
            document.getElementById('pImg').value = '';
            document.getElementById('pLink').value = '';

            // Restaurar visual
            const btnSave = document.getElementById('btnSave');
            btnSave.innerText = '+ Publicar Produto';
            btnSave.classList.remove('editing');

            document.getElementById('formHeader').innerText = '‚ú® Adicionar Novo Produto';
            document.getElementById('btnCancel').style.display = 'none';
        }

        function removeProduct(index) {
            if(confirm('Tem certeza que deseja excluir este produto da loja?')) {
                // Se estiver editando o produto que vai deletar, cancela a edi√ß√£o antes
                if (editIndex === index) cancelEdit();
                
                products.splice(index, 1);
                saveData();
            }
        }

        function resetFactory() {
            if(confirm('ATEN√á√ÉO: Isso apagar√° todas as suas edi√ß√µes e voltar√° aos produtos originais. Confirmar?')) {
                localStorage.removeItem(STORAGE_KEY);
                products = [...defaultList];
                location.reload();
            }
        }

        function saveData() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(products));
            renderList();
        }

        // Iniciar a renderiza√ß√£o
        renderList();
    </script>
</body>
</html>